<section><%- include header.ejs %></section>

<main>
    <div class="container">
        <div class="row">
            <div class="center-align">
                <h1><%= course.name %></h1>
                <img class="responsive-img" src="<%= course.picture %>">
                <h5><%= course.description %></h5>
                <% if (course.requirement != '') { %>
                <h5>El curso requiere: <%= course.requirement %></h5>
                <%} else { %>
                <h6>Este curso no tiene requisitos</h6>
                <% } %>
                <br>
                <div class="divider"></div>
                <br>
                <% if (user) { %>
                <% try { if (user.role == 3) { %>
                <div class="row left-align">
                    <div class="col l12 m12 s12">
                        <ul class="collapsible" data-collapsible="accordion">
                            <% for (var i=0; i<course.teachers.length; i++) { %>
                            <li>
                                <div class="collapsible-header">
                                    <div class="row">
                                        <div class="col l2">
                                            <img src="<%= teacher_user[i].picture %>" class="responsive-img" style="max-height: 150px">
                                        </div>
                                        <div class="col l10">
                                            <h5><%= course.teachers[i].fullName %></h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="collapsible-body">
                                    <p><%= course.teachers[i].description %></p>
                                    <p>Precio por hora de clase:</p>
                                    <p><i class="material-icons">$</i> <%= course.teachers[i].getPriceOfCourse(course.id) %></p>
                                    <a href="<%= course.teachers[i].url %>">Más información</a>
                                    <br>
                                    <br>
                                    <form action="/lesson/create" method="get" class="center-align">
                                        <input type="hidden" name="teacherId" id="teacherId" value="<%=course.teachers[i].id%>">
                                        <input type="hidden" name="courseId" id="courseId" value="<%=course.id%>">
                                        <input type="hidden" name="offset" value="0">
                                        <input class="btn" type="submit" value="Reservar una clase">
                                    </form>
                                </div>
                            </li>
                            <% } %>
                        </ul>
                    </div>
                </div>
                <% } else if (user.role == 2) { %>
                <h3>Se movió esta sección</h3>
                <% } else { %>
                <a class="btn" href="<%= course.url %>/update">Modificar</a>
                <% } } catch(e){} } else { %>
                <p>Inicia sesión para ver detalles de los profesores</p>
                <% } %>
            </div>
        </div>
    </div>
</main>

<section><%- include footer.ejs %></section>