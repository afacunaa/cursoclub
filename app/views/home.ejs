<%- include header.ejs %>

<main>
    <br>
    <% if (user.role == 1) { %>
    <div class="container">
        <h4>Portal de administración</h4>
        <ul class="collection">
            <li class="collection-item"><h5><a href="/transactions"><i class="material-icons">history</i> Lista de operaciones</a></h5></li>
            <li class="collection-item"><h5><a href="/usageTrack"><i class="material-icons">flag</i> Registro de utilización</a></h5></li>
            <li class="collection-item"><h5><a href="/teachers"><i class="material-icons">recent_actors</i> Lista de instructores</a></h5></li>
            <li class="collection-item"><h5><a href="/teacher/create"><i class="material-icons">person_pin</i> Añadir a un instructor</a></h5></li>
            <li class="collection-item"><h5><a href="/cursos"><i class="material-icons">view_carousel</i> Lista de cursos</a></h5></li>
            <li class="collection-item"><h5><a href="/curso/create"><i class="material-icons">note_add</i> Añadir un curso</a></h5></li>
            <li class="collection-item"><h5><a href="/students"><i class="material-icons">recent_actors</i> Lista de usuarios</a></h5></li>
            <li class="collection-item"><h5><a href="/blogs"><i class="material-icons">library_books</i> Blog</a></h5></li>
            <li class="collection-item"><h5><a href="/mensajes"><i class="material-icons">mail_outline</i> Lista de mensajes</a></h5></li>
        </ul>
    </div>
    <% } else if (user.role == 2) { %>
    <div class="container">
        <% if (booked > 0) { %>
        <div class="chip orange">
            <% if (booked === 1) { %>
            <%= booked %> clase solicitada
            <% } else { %>
            <%= booked %> clases solicitadas
            <% } %>
        </div>
        <% } %>
        <% if (paid > 0) { %>
        <div class="chip green">
            <% if (paid === 1) { %>
            <%= paid %> clase pendiente
            <% } else { %>
            <%= paid %> clases pendientes
            <% } %>
        </div>
        <% } %>
        <h4 class="cc-corporate-blue-text">Portal de instructor</h4>
        <div class="row">
            <div class="col l5 m5 s12">
                <% if (user.picture) { %>
                <img class="responsive-img hide-on-small-only" src="<%= user.picture %>">
                <img class="responsive-img hide-on-med-and-up cc-home-img" src="<%= user.picture %>">
                <% } else { %>
                <img class="responsive-img" src="/img/silueta.png">
                <p>Actualiza tu foto para que los usuarios puedan saber algo más sobre ti</p>
                <% } %>
                <% if (person.description) { %>
                <blockquote class="cc-keep-line-breaks"><%= person.description %></blockquote>
                <% } else { %>
                <div class="card yellow lighten-2">
                    <div class="card-content">
                        <p class="flow-text"><i class="material-icons blue-text">new_releases</i> <a href="/teacher/<%= user.teacher %>/update">Actualiza</a> tu foto para que los usuarios puedan saber algo más sobre ti</p>
                    </div>
                </div>
                <% } %>
            </div>
            <div class="col l7 m7 s12">
                <h4><%= person.fullName %></h4>
                <p class="flow-text"><i class="material-icons">email</i> <%= user.email %></p>
                <p class="flow-text"><i class="material-icons">perm_contact_calendar</i> <%= person.nice_birthday %></p>
                <p class="flow-text"><i class="material-icons">call</i> <%= person.phone %></p>
                <h6 class="cc-score-stars amber-text">
                    <% for (var i=0; i<Math.floor(person.score); i++) { %>
                    <i class="small material-icons">grade</i>
                    <% } %>
                    <%= parseFloat(person.score).toFixed(2) %>
                </h6>
                <p class="flow-text"><i class="small material-icons">location_on</i> Clases en: </p>
                <div>
                    <ul>
                        <% for (var i=0; i<person.workingArea.length; i++) {%>
                        <li>
                            <h6><i class="tiny material-icons">location_searching</i> <%= person.workingArea[i] %></h6>
                        </li>
                        <% } %>
                    </ul>
                </div>
                <br>
                <% if (courses.length > 0) { %>
                <div class="divider"></div>
                <br>
                <h5>Eres instructor de los siguientes cursos:</h5>
                <ul class="collection">
                    <% for (var i=0; i<courses.length; i++) { %>
                    <li class="collection-item avatar">
                        <img class="circle" src="<%= courses[i].picture %>">
                        <span class="title"><a href="<%= courses[i].url %>"><%= courses[i].name %></a></span>
                        <p>Precio por hora de clase: $ <%= person.getPriceOfCourse(courses[i].id) %></p>
                    </li>
                    <% } %>
                </ul>
                <p>Para modificar la información de tus cursos debes comunicarte con nosotros</p>
                <% } else { %>
                <h5>Para añadir nuevos cursos debes comunicarte con nosotros</h5>
                <% } %>
                <br>
                <div class="card light-green lighten-2">
                    <div class="card-content">
                        <p class="flow-text"><i class="material-icons blue-text">new_releases</i> No olvides mantener actualizado tu <a href="/teacher/<%= user.teacher %>/scheduleUpdate">horario de disponibilidad</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <% } else if (user.role == 3) { %>
    <div class="container">
        <% if (accepted > 0) { %>
        <div class="chip blue">
            <% if (accepted === 1) { %>
            <%= accepted %> clase aceptada
            <% } else { %>
            <%= accepted %> clases aceptadas
            <% } %>
        </div>
        <% } %>
        <% if (paid > 0) { %>
        <div class="chip green">
            <% if (paid === 1) { %>
            <%= paid %> clase pendiente
            <% } else { %>
            <%= paid %> clases pendientes
            <% } %>
        </div>
        <% } %>
        <% if (rejected > 0) { %>
        <div class="chip red">
            <% if (rejected === 1) { %>
            <%= rejected %> clase rechazada
            <% } else { %>
            <%= rejected %> clases rechazadas
            <% } %>
        </div>
        <% } %>
    </div>

    <%- include instructions.ejs %>
    <%- include category_list.ejs %>


        <h4 class="header center cc-corporate-purple-text cc-font-title">Instructores registrados</h4>
        <div class="row">
            <% for (var i=0; i<users_list.length; i++) { %>
            <div class="col l4 m4 s12">
                <div class="card hoverable">
                    <div class="row">
                        <div class="col l3 m3 s3">
                            <% if (users_list[i].picture) { %>
                            <img src="<%= users_list[i].picture %>" class="responsive-img" style="max-width: 100px;">
                            <% } else { %>
                            <img class="responsive-img" src="/img/silueta.png" style="max-width: 100px;">
                            <% } %>
                        </div>
                        <div class="col l9 m9 s9">
                            <span class="card-title"><%= users_list[i].teacher.shortName %></span>
                            <p>
                                <% for (var k=0; k<users_list[i].teacher.courses.length; k++) { %>
                                <%= users_list[i].teacher.courses[k].course.name %>
                                    <% if (k < users_list[i].teacher.courses.length - 1 ) { %>
                                ,
                                    <% } %>
                                <% } %>
                                <br>
                                <strong><%= users_list[i].teacher.city %></strong>
                            </p>
                            <% if (users_list[i].teacher.score) { %>
                            <h6 class="cc-score-stars amber-text">
                                <% for (var j=0; j<Math.floor(users_list[i].teacher.score); j++) { %>
                                <i class="tiny material-icons">grade</i>
                                <% } %>
                                <%= parseFloat(users_list[i].teacher.score).toFixed(2) %>
                            </h6>
                            <% } else { %>
                            <h6 class="grey-text">No hay calificación</h6>
                            <% } %>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="row" align="justify">
                            <p><%= users_list[i].teacher.description.substr(0, 150) %>...</p>
                        </div>
                    </div>
                    <div class="card-action">
                        <a class="green-text" href="<%= users_list[i].teacher.url %>">Más información</a>
                    </div>
                </div>
            </div>
            <% } %>
        </div>

    <% } %>
</main>

<%- include footer.ejs %>