<%- include header.ejs %>

<main>
    <br>
    <div class="container">
        <h4 class="cc-corporate-green-text cc-font-title">Detalle del instructor</h4>
        <div class="row">
            <div class="col l2 m2 12">
                <% if(teacher_user.picture) { %>
                <img class="responsive-img hide-on-small-only" src="<%= teacher_user.picture %>">
                <img class="responsive-img hide-on-med-and-up" style="max-width: 100px" src="<%= teacher_user.picture %>">
                <% } else { %>
                <img class="responsive-img hide-on-small-only" src="/img/silueta.png">
                <img class="responsive-img hide-on-med-and-up" style="max-width: 100px" src="/img/silueta.png">
                <p><%= teacher.firstName %> no ha subido una imagen</p>
                <% } %>
            </div>
            <div class="col l8 m8 s12">
                <h4><%= teacher.shortName %></h4>
                <h5>
                    <a href="/mensaje/nuevo/<%= teacher_user.id %>">
                        <i class="material-icons small">mail_outline</i> Enviarle un mensaje
                    </a>
                </h5>
                <% if (teacher.score) { %>
                <h6 class="cc-score-stars amber-text">
                    <% for (var i=0; i<Math.floor(teacher.score); i++) { %>
                    <i class="small material-icons">grade</i>
                    <% } %>
                    <%= parseFloat(teacher.score).toFixed(2) %>
                </h6>
                <% } else { %>
                <h6>No hay calificación</h6>
                <% } %>
                <h5><i class="small material-icons">location_on</i> <%= teacher.city %> - Clases en: </h5>
                <div>
                    <ul>
                        <% for (var i=0; i<teacher.workingArea.length; i++) {%>
                        <li><h6><i class="tiny material-icons">location_searching</i> <%= teacher.workingArea[i] %></h6></li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <p>Acerca de <%= teacher.firstName %>:</p>
            <blockquote class="cc-keep-line-breaks"><%= teacher.description %></blockquote>
        </div>
        <% if (teacher.courses.length > 0) { %>
        <div class="divider"></div>
        <br>
        <div class="row">
        <% if(teacher.courses.length > 1) { %>
        <h5><%= teacher.firstName %> es profesor de <%= teacher.courses.length %> cursos </h5>
        <% } else { %>
        <h5><%= teacher.firstName %> es profesor de <%= teacher.courses.length %> curso </h5>
        <% } %>
        <ul class="collection">
            <% for (var i=0; i<teacher.courses.length; i++) { %>
            <li class="collection-item avatar">
                <img class="circle" src="<%= teacher.courses[i].course.picture %>">
                <span class="title"><a href="<%= teacher.courses[i].course.url %>"><%= teacher.courses[i].course.name %></a></span>
                <p>Precio promedio por hora de clase: $<%= teacher.courses[i].pricePerHour %></p>
                <br>
                <form action="/lesson/create" method="get">
                    <input type="hidden" name="teacherId" id="teacherId" value="<%= teacher.id %>">
                    <input type="hidden" name="courseId" id="courseId" value="<%= teacher.courses[i].course.id %>">
                    <input type="hidden" name="offset" value="0">
                    <button class="btn indigo" type="submit">Reservar clase</button>
                </form>
            </li>
            <% } %>
        </ul>
        <% } %>
        </div>
        <% if (user.role == 1) { %>
            <% if (!teacher.member.isMember) { %>
        <div class="row">
            <h4 class="red-text"><i class="material-icons">warning</i> Instructor no activo</h4>
                <% if (teacher.request) { %>
            <p>Solicita ofrecer clases de: "<%= teacher.request %>"</p>
                <% } %>
        </div>
            <% } %>
        <div class="row">
            <div class="col l6 m6 s12">
                <a class="btn" href="/teacher/<%= teacher.id %>/update">Editar información</a>
            </div>
            <div class="col l6 m6 s12">
                <form method="post" action="/teacher/<%= teacher.id %>/delete">
                    <button class="btn red" type="submit" value="Eliminar">Eliminar profesor</button>
                </form>
            </div>
        </div>
        <% } %>

    </div>
</main>

<%- include footer.ejs %>
